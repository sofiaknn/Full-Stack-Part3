{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Filter","props","console","log","value","filter","onChange","handler","PersonForm","onSubmit","submit","name","handlerName","number","handlerNumber","type","Persons","nameArray","names","map","k","onClick","click","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","showAll","newFilter","setNewFilter","message","setMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","length","namesToShow","n","toLowerCase","includes","ErrorNotification","className","Notification","event","target","preventDefault","nameObject","some","e","person","find","changedNumber","window","confirm","returnedPerson","setTimeout","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5791659a.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst del = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, del, update }","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ showAll, setShowAll ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        console.log('promise fulfilled')\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const namesToShow = showAll\n   ? persons\n   : persons.filter(n => n.name.toLowerCase().includes(newFilter.toLowerCase()))\n\n  const addName = (event) => {\n    event.preventDefault()\n    console.log('button clicked', event.target)\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }  \n    if (persons.some(e => e.name.toLowerCase() === newName.toLowerCase())) {\n      const person = persons.find(n => n.name.toLowerCase() === newName.toLowerCase())\n      const changedNumber = {...person, number: newNumber}\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService\n          .update(person.id, changedNumber)\n          .then(returnedPerson => {\n          setPersons(persons.map(person => person.name.toLowerCase() !== newName.toLowerCase() ? person: returnedPerson))\n          setMessage(`Updated ${newName}`\n          )\n          setTimeout(() => {\n           setMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setErrorMessage(\n            `${newName} was already removed from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setPersons(persons.filter(n => n.name !== newName))\n        })\n      }\n    }\n    else {\n      personService\n      .create(nameObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage(`Added ${newName}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        const alarm = error.response.data\n        setErrorMessage(\n          error.response.data.error\n      )\n        setTimeout(() => {\n        setErrorMessage(null)\n        }, 5000)\n      })\n    }\n  }\n  const delName = (id, name) => {\n    if (window.confirm(`Delete ${name} ?`)) {\n      personService\n      .del(id)\n      .then(() => {\n      setPersons(persons.filter(person => person.id !== id))\n      setMessage(`Deleted ${name}`\n      )\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n      })\n      .catch(error => {\n        setErrorMessage(`${name} was already removed from server`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.id !== id))\n      })\n    }\n  }\n  const ErrorNotification = ({ errorMessage }) => {\n    if (errorMessage === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {errorMessage}\n      </div>\n    )\n  }\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n    return (\n      <div className=\"succeed\">\n        {message}\n      </div>\n    )\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <ErrorNotification errorMessage={errorMessage} />\n      <Filter filter={newFilter} handler={handleFilterChange}/>\n      <h2>add a new</h2>\n      <PersonForm submit={addName} name={newName} handlerName={handleNameChange}\n      number={newNumber} handlerNumber={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons names={namesToShow} persons={persons} filter={newFilter} click={delName}/>\n    </div>\n  )\n\n}\nconst Filter = (props) => {\n  console.log(props)\n  return (\n    <div>filter shown with <input value = {props.filter}\n      onChange = {props.handler}/>\n    </div>\n  )\n}\nconst PersonForm = (props) => {\n  return(\n    <form onSubmit={props.submit}>\n        <div> name: <input value={props.name} \n        onChange={props.handlerName} /> </div>\n        <div>number: <input value={props.number} \n        onChange={props.handlerNumber}/></div>\n        <div><button type=\"submit\">add</button></div>\n      </form>\n  )\n}\nconst Persons = (props) => {\n  const nameArray = props.names\n  return (\n    <div>\n      {nameArray.map(k =>\n       <p key={k.name}>\n       {k.name} {k.number} <button onClick={() => {\n         {props.click(k.id, k.name)}\n       }}>delete</button>\n      </p>\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}